# 标签页切换问题修复说明

## 问题描述
点击"提示词管理"标签页没有反应，无法切换到提示词管理界面。

## 问题原因
1. **CSS 类名冲突**：原代码使用 `.hidden` 类，但 JavaScript 中使用的是 `classList.add('hidden')`/`classList.remove('hidden')`，与 Tailwind CSS 的 `.hidden` 类可能存在冲突
2. **CSS 优先级问题**：`.tab-content:not(.hidden)` 的优先级可能不够高
3. **初始状态不正确**：两个标签页初始状态都没有正确设置

## 修复方案

### 1. 修改 CSS (static/index.html)
```css
/* 修复前 */
.tab-content {
    display: none;
}
.tab-content:not(.hidden) {
    display: flex;
}

/* 修复后 */
.tab-content {
    display: none !important;
}
.tab-content.active {
    display: flex !important;
}
```

### 2. 修改 HTML 初始状态
```html
<!-- 修复前 -->
<div id="models-tab" class="tab-content ...">
<div id="prompts-tab" class="tab-content hidden ...">

<!-- 修复后 -->
<div id="models-tab" class="tab-content active ...">
<div id="prompts-tab" class="tab-content ...">
```

### 3. 修改 JavaScript 逻辑 (static/script.js)
```javascript
// 修复前
document.querySelectorAll('.tab-content').forEach(content => {
    content.classList.add('hidden');
});
document.getElementById(\`\${tabName}-tab\`).classList.remove('hidden');

// 修复后
document.querySelectorAll('.tab-content').forEach(content => {
    content.classList.remove('active');
});
const targetTab = document.getElementById(\`\${tabName}-tab\`);
if (targetTab) {
    targetTab.classList.add('active');
    console.log('Tab activated:', tabName);
}
```

### 4. 添加调试信息
在 JavaScript 中添加了 `console.log` 输出，方便调试。

## 测试步骤

1. **刷新页面**
   - 按 `Ctrl+Shift+R` (Windows/Linux) 或 `Cmd+Shift+R` (Mac) 强制刷新
   - 这会清除浏览器缓存，确保加载最新的 CSS 和 JS

2. **打开浏览器开发者工具**
   - 按 `F12` 或右键选择"检查"
   - 切换到 "Console" (控制台) 标签

3. **测试标签页切换**
   - 点击"提示词管理"按钮
   - 应该看到控制台输出：
     ```
     Tab clicked: prompts
     Tab activated: prompts
     ```
   - 界面应该切换到提示词管理页面

4. **切换回模型配置**
   - 点击"模型配置"按钮
   - 应该看到控制台输出：
     ```
     Tab clicked: models
     Tab activated: models
     ```
   - 界面应该切换回模型配置页面

## 验证清单

- [ ] 页面加载时，"模型配置"标签页显示（有蓝色下划线）
- [ ] 点击"提示词管理"按钮，能正常切换
- [ ] "提示词管理"按钮变为蓝色下划线
- [ ] 提示词管理页面内容显示正常
- [ ] 可以来回切换标签页
- [ ] 控制台有正确的调试输出

## 如果仍然不工作

### 方法 1: 清除浏览器缓存
1. 打开浏览器设置
2. 查找"清除浏览数据"或"清除缓存"
3. 选择"缓存的图片和文件"
4. 点击清除
5. 重新访问页面

### 方法 2: 使用无痕/隐私模式
1. 打开浏览器的无痕窗口
   - Chrome: `Ctrl+Shift+N`
   - Firefox: `Ctrl+Shift+P`
   - Edge: `Ctrl+Shift+N`
2. 访问 http://127.0.0.1:8000
3. 测试标签页切换

### 方法 3: 检查浏览器控制台错误
1. 打开开发者工具 (F12)
2. 查看 Console 标签是否有红色错误信息
3. 如果有错误，请记录并报告

### 方法 4: 验证文件是否正确加载
在浏览器控制台运行：
```javascript
// 检查 CSS 类
console.log(document.querySelector('#models-tab').classList);
console.log(document.querySelector('#prompts-tab').classList);

// 手动切换测试
document.querySelector('[data-tab="prompts"]').click();
```

## 附加改进

为了更好的用户体验，还添加了：
- 按钮 hover 效果（鼠标悬停时颜色变化）
- 按钮光标变为手型 (`cursor: pointer`)
- 更多的控制台调试输出

## 成功标志

修复成功后，您应该能看到：
1. ✅ 点击"提示词管理"，页面立即切换
2. ✅ 看到"提示词模板"标题
3. ✅ 看到提示词列表（至少有"默认提示词"）
4. ✅ 看到"添加新提示词"表单
5. ✅ 可以流畅地在两个标签页之间切换

---

**修复完成时间**: 2025-10-26  
**影响的文件**:
- `static/index.html` (CSS 和 HTML 结构)
- `static/script.js` (JavaScript 逻辑)
